# מדריך לייבוא בתי כנסת מ-Google Places API

## סקירה כללית

נוצר סקריפט שמאפשר לייבא בתי כנסת מ-Google Places API למסד הנתונים שלך. הסקריפט מחפש בתי כנסת בערים הגדולות בישראל ומייבא אותם אוטומטית.

## דרישות

1. **מפתח Google Maps API** - צריך להיות מוגדר ב-`.env.local`:
   ```
   NEXT_PUBLIC_GOOGLE_MAPS_API_KEY="your-api-key-here"
   ```

2. **הרשאות API** - ודא שהפעלת את ה-APIs הבאים ב-Google Cloud Console:
   - Maps JavaScript API
   - Places API
   - Geocoding API (אופציונלי)

## שימוש

### הרצת הסקריפט

```bash
npm run fetch-synagogues
```

הסקריפט יעשה את הדברים הבאים:

1. **חיפוש בערים הגדולות** - הסקריפט מחפש בתי כנסת ב-15 ערים גדולות בישראל:
   - תל אביב
   - ירושלים
   - חיפה
   - באר שבע
   - נתניה
   - אשדוד
   - רמת גן
   - בני ברק
   - בת ים
   - הרצליה
   - כפר סבא
   - רחובות
   - ראשון לציון
   - פתח תקווה
   - רעננה

2. **איסוף פרטים** - לכל בית כנסת שנמצא, הסקריפט אוסף:
   - שם
   - כתובת מלאה
   - קואורדינטות (lat/lng)
   - טלפון (אם זמין)
   - אתר (אם זמין)

3. **זיהוי נוסח** - הסקריפט מנסה לזהות את הנוסח לפי השם והכתובת:
   - חב"ד
   - ספרד
   - תימן
   - עדות המזרח
   - אשכנז (ברירת מחדל)

4. **מניעת כפילויות** - הסקריפט בודק אם בית כנסת כבר קיים במסד הנתונים לפי קואורדינטות

## הגבלות

- **Rate Limiting** - הסקריפט כולל המתנות בין בקשות כדי להימנע מחריגת מגבלות Google API
- **עלויות** - שימוש ב-Google Places API כרוך בעלויות. בדוק את המחירים ב-[Google Cloud Pricing](https://cloud.google.com/maps-platform/pricing)
- **נתונים חלקיים** - לא כל בתי הכנסת ב-Google Places כוללים את כל הפרטים

## שיפור החיפוש

החיפוש באפליקציה שופר כדי לתמוך ב:

1. **חיפוש גיאוגרפי** - חיפוש בתי כנסת ברדיוס מסוים ממיקום המשתמש
2. **חיפוש טקסטואלי משופר** - חיפוש בשם, כתובת, עיר ותיאור
3. **סינון לפי נוסח** - סינון לפי נוסח התפילה
4. **Debouncing** - החיפוש מתעדכן אוטומטית עם debounce של 300ms

## שימוש ב-API

### חיפוש בסיסי

```
GET /api/synagogues
```

### חיפוש עם מיקום

```
GET /api/synagogues?lat=32.0853&lng=34.7818&radius=20
```

### חיפוש עם טקסט

```
GET /api/synagogues?search=ירושלים
```

### חיפוש עם סינון נוסח

```
GET /api/synagogues?nusach=ASHKENAZ
```

### חיפוש משולב

```
GET /api/synagogues?lat=32.0853&lng=34.7818&radius=10&search=תל אביב&nusach=SEPHARD
```

## הערות

- הסקריפט יכול לקחת זמן רב (מספר דקות) בגלל Rate Limiting
- מומלץ להריץ את הסקריפט בלילה או בזמנים של עומס נמוך
- הסקריפט שומר התקדמות - אם הוא נעצר, אפשר להריץ אותו שוב והוא ידלג על בתי כנסת שכבר קיימים

## פתרון בעיות

### שגיאת API Key

אם אתה מקבל שגיאה על מפתח API:
1. ודא שהמפתח מוגדר ב-`.env.local`
2. ודא שהמפתח פעיל ב-Google Cloud Console
3. ודא שהפעלת את ה-APIs הנדרשים

### שגיאת Rate Limit

אם אתה מקבל שגיאת Rate Limit:
1. המתן מספר דקות והרץ שוב
2. שקול להגדיל את ההמתנות בין בקשות בסקריפט

### בתי כנסת לא נשמרים

אם בתי כנסת לא נשמרים:
1. בדוק את הלוגים של הסקריפט
2. ודא שמסד הנתונים נגיש
3. בדוק אם יש שגיאות Prisma

